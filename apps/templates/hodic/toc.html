{% extends 'base.html' %}

{% block title %}HODIC&nbspCircular{% endblock %}

{% block circular %}
    {% if user.groups.all.0.name == '会員' %}
        <div class="navbar-nav ms-auto">
            <li class="nav-item">
                <a class="nav-link" href="{% url 'accounts:logout' %}" style="font-size: 18px; color: #FFFFFF; background-color: #666666; padding: 8px 15px; border-radius: 5px; font-weight: bold;">ログアウト</a>
            </li>
        </div>
    {% else %}
        <div class="navbar-nav ms-auto">
            <li class="nav-item">
                <a class="nav-link" href="{% url 'accounts:login' %}" style="font-size: 18px; color: #FFFFFF; background-color: #666666; padding: 8px 15px; border-radius: 5px; font-weight: bold;">ログイン</a>
            </li>
        </div>
    {% endif %}
{% endblock %}

{% block content %}
    {% if user.groups.all.0.name == '会員' %}
        <div class="container-lg">
            <div class="pt-4" style="text-align: center">
                <h2>ホログラフィック・ディスプレイ研究会会報</h2>
            </div>
            <div class="py-4">
                <div style="text-align: center">
                	{% load static%}
                    <img src="{% static "img/hodic/circular_log.gif" %}" class="img-fluid" alt="Responsive Image">
                </div>
            </div>
            <div class="pt-5">
            {% for item in hodicarticle_list %}
            {% if item.category.name == "Circularダウンロード(会員)" %}
            {% if item.order == 1 %}
                <h4><span class="rounded" style="background-color: rgb(0, 238, 153); border: 1px solid rgb(0, 238, 153); padding-left: 5px;"></span>&nbsp{{ item.subtitle }}</h4>
            </div>
            <div>{{ item.article | safe }}</div>
            {% endif %}
            {% endif %}
            {% endfor %}
            <div class="py-3">
                <div class="table-responsive position-relative" style="width:100%; height:600px;">
                    <table class="table table-hover">
                        <thead class="table-dark">
                            <tr>
                                <th scope="col" style="width:14%;">名前</th>
                                <th scope="col" style="width:6%;">年</th>
                                <th scope="col">目次</th>
                                <th scope="col" style="width:12%;">会報ダンロード</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for circular in circular_list %}
                                <tr>
                                    <td>{{ circular.name }}</td>
                                    <td>{{ circular.date|date:"Y年" }}</td>
                                    <td>{{ circular.toc |safe }}</td>
                                    {% if circular.date >= three_years_ago %}
                                        <td>
                                            <a href="{{ circular.pdf.url }}" download="{{ circular.pdf.name }}">
                                                <button type="button" class="btn btn-outline-secondary btn-sm">PDFをダウンロードする</button>
                                            </a>
                                        </td>
                                    {% endif %}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    {% else %}
        <div class="container-lg">
            <div class="pt-4" style="text-align: center">
                <h2>ホログラフィック・ディスプレイ研究会会報</h2>
            </div>
            <div class="py-4">
                <div style="text-align: center">
                	{% load static%}
                    <img src="{% static "img/hodic/circular_log.gif" %}" class="img-fluid" alt="Responsive Image">
                </div>
            </div>
            <div class="pt-5">
            {% for item in hodicarticle_list %}
            {% if item.category.name == "Circularダウンロード(非会員)" %}
            {% if item.order == 1 %}
                <h4><span class="rounded" style="background-color: rgb(0, 238, 153); border: 1px solid rgb(0, 238, 153); padding-left: 5px;"></span>&nbsp{{ item.subtitle }}</h4>
            </div>
            <div>{{ item.article | safe }}</div>
            {% endif %}
            {% endif %}
            {% endfor %}
            <div class="py-3">
                <div class="table-responsive position-relative" style="width:100%; height:600px;">
                    <table class="table table-hover">
                        <thead class="table-dark">
                            <tr>
                                <th scope="col" style="width:14%;">名前</th>
                                <th scope="col" style="width:6%;">年</th>
                                <th scope="col">目次</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for circular in circular_list %}
                                <tr>
                                    <td>{{ circular.name }}</td>              
                                    <td>{{ circular.date|date:"Y年" }}</td>
                                    <td>{{ circular.toc |safe }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    {% endif %}
{% endblock %}